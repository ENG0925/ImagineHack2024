<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NavBar Example</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="navbar.css">
  <link rel="stylesheet" href="chatbot.css">
</head>
<body>
  <div id="nav-bar">
    <input id="nav-toggle" type="checkbox">
    <div id="nav-header">
      <a id="nav-title" target="_blank">Hello W<i class="fa-solid fa-earth-asia" style="min-width: 1.8rem"></i>rld</a>
      <label for="nav-toggle">
        <span id="nav-toggle-burger"></span>
      </label>
      <hr>
    </div>

    <div id="nav-content">
      <div class="nav-button"><a href="home_page.html"><i class="fas fa-home"></i><span>Home Page</span></a></div>
      <div class="nav-button"><a href="customer.html"><i class="fa-solid fa-user"></i><span>Customer</span></a></div>
      <div class="nav-button"><a href="supplier.html"><i class="fa-solid fa-box"></i><span>Supplier</span></a></div>
      <div class="nav-button"><a href="invoice.html"><i class="fa-solid fa-file-invoice"></i><span>Invoice</span></a></div>
      <div class="nav-button"><a href="items.html"><i class="fa-solid fa-boxes-stacked"></i><span>Items</span></a></div>
    </div>

    <input id="nav-footer-toggle" type="checkbox">
    <div id="nav-footer">
      <div id="nav-footer-heading">
        <div id="nav-footer-titlebox">
          <a id="nav-footer-title"target="_blank">Settings</a>
        </div>
        <label for="nav-footer-toggle">
          <i class="fas fa-caret-up"></i>
        </label>
      </div>
      <div id="nav-footer-content">
        <div class="nav-button"><i class="fas fa-cog"></i><span>Settings</span></div>
        <div class="nav-button"><i class="fas fa-user"></i><span>Profile</span></div>
        <div class="nav-button"><i class="fas fa-sign-out-alt"></i><span>Logout</span></div>
      </div>
    </div>
  </div>

  <div id="chat-circle" class="btn btn-raised">
    <i class="material-icons">speaker_phone</i>
  </div>

  <div class="chat-box">
    <div class="chat-box-body">
      <div class="chat-box-header">
        ChatBot
        <span class="chat-box-toggle"><i class="material-icons">close</i></span>
      </div>
      
      <div class="chat-logs"><div class="chat-box-overlay"></div></div><!-- chat-log -->
      <div class="chat-input">
        <form>
          <input type="text" id="chat-input" placeholder="Send a message..."/>
          <button type="submit" class="chat-submit" id="chat-submit"><i class="material-icons">send</i></button>
        </form>
      </div>
    </div>
  </div>


  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
      $(function() {
          var INDEX = 0;
          $("#chat-submit").click(function(e) {
              e.preventDefault();
              var msg = $("#chat-input").val();
              if (msg.trim() == '') {
                  return false;
              }
              generate_message(msg, 'self');
              setTimeout(function() {
                  generate_message(msg, 'user');
              }, 1000);
          });

          function generate_message(msg, type) {
              INDEX++;
              var str = "";
              str += "<div id='cm-msg-" + INDEX + "' class=\"chat-msg " + type + "\">";
              str += "<span class=\"msg-avatar\">";
              if(type == 'self') {
                  str += "<img src=\"https://i.pinimg.com/564x/d9/7b/bb/d97bbb08017ac2309307f0822e63d082.jpg\">"; // User image
              } else {
                  str += "<img src=\"https://i.pinimg.com/564x/92/1f/55/921f557b5e21ceb73a0ccc4b16442a56.jpg\">"; // Bot image
              }
              str += "<\/span>";
              str += "<div class=\"cm-msg-text\">";
              str += msg;
              str += "<\/div>";
              str += "<\/div>";
              $(".chat-logs").append(str);
              $("#cm-msg-" + INDEX).hide().fadeIn(300);
              if (type == 'self') {
                  $("#chat-input").val('');
              }
              $(".chat-logs").stop().animate({ scrollTop: $(".chat-logs")[0].scrollHeight }, 1000);
          }

          function generate_button_message(msg, buttons) {
              INDEX++;
              var btn_obj = buttons.map(function(button) {
                  return "              <li class=\"button\"><a href=\"javascript:;\" class=\"btn btn-primary chat-btn\" chat-value=\"" + button.value + "\">" + button.name + "<\/a><\/li>";
              }).join('');
              var str = "";
              str += "<div id='cm-msg-" + INDEX + "' class=\"chat-msg user\">";
              str += "<span class=\"msg-avatar\">";
              str += "<img src=\"https://i.pinimg.com/564x/92/1f/55/921f557b5e21ceb73a0ccc4b16442a56.jpg\">";
              str += "<\/span>";
              str += "<div class=\"cm-msg-text\">";
              str += msg;
              str += "<\/div>";
              str += "<div class=\"cm-msg-button\">";
              str += "<ul>";
              str += btn_obj;
              str += "<\/ul>";
              str += "<\/div>";
              str += "<\/div>";
              $(".chat-logs").append(str);
              $("#cm-msg-" + INDEX).hide().fadeIn(300);
              $(".chat-logs").stop().animate({ scrollTop: $(".chat-logs")[0].scrollHeight }, 1000);
              $("#chat-input").attr("disabled", true);
          }

          $(document).delegate(".chat-btn", "click", function() {
              var value = $(this).attr("chat-value");
              var name = $(this).html();
              $("#chat-input").attr("disabled", false);
              generate_message(name, 'self');
          });

          $("#chat-circle").click(function() {
              $("#chat-circle").toggle('scale');
              $(".chat-box").toggle('scale');
          });

          $(".chat-box-toggle").click(function() {
              $("#chat-circle").toggle('scale');
              $(".chat-box").toggle('scale');
          });
      });
  </script>
    
</body>
</html>
